# 画布编辑器设计

## 1. 模块概述

画布编辑器是提案展示系统的核心创作工具，提供拖拽式编辑界面，支持富文本、图片、视频、3D模型等多种媒体类型。界面设计采用专业设计软件的布局风格，结合杂志美学，为设计师提供高效、直观的创作体验。

## 2. 整体布局

### 2.1 布局结构

**四面板布局**:
- **顶部工具栏**: 高度 `56px`，固定定位，包含全局操作和页面导航
- **左侧工具面板**: 宽度 `280px`，可折叠，包含页面管理、模块库、素材库
- **中央画布区**: 宽度自适应，显示当前编辑页面
- **右侧属性面板**: 宽度 `320px`，可折叠，显示选中元素的属性设置

### 2.2 画布区域

**画布容器**:
- **背景色**: `#FFFFFF`
- **阴影**: `0 4px 16px rgba(0, 0, 0, 0.12)`
- **圆角**: `8px`
- **内边距**: `24px`
- **居中对齐**: 在容器中水平垂直居中

**画布尺寸**:
- **桌面端**: 1920px × 1080px（可切换其他尺寸）
- **移动端**: 375px × 667px
- **平板端**: 768px × 1024px
- **自定义**: 支持自定义尺寸

**画布标尺**:
- **顶部标尺**: 显示X轴坐标
- **左侧标尺**: 显示Y轴坐标
- **网格线**: 可开关，间距 `10px`
- **参考线**: 可拖拽添加，自动吸附

## 3. 顶部工具栏

### 3.1 左侧区域

**返回按钮**:
- **图标**: 返回箭头
- **文字**: "返回提案"
- **悬停效果**: 背景色 `rgba(212, 175, 55, 0.1)`

**提案信息**:
- **提案名称**: 字体 `16px`，字重 `Medium`，可点击编辑
- **自动保存**: 显示"已自动保存"或"正在保存..."
- **版本号**: 显示当前版本号

### 3.2 中间区域

**撤销/重做**:
- **撤销按钮**: 图标 + 文字，禁用状态灰色
- **重做按钮**: 图标 + 文字，禁用状态灰色

**页面导航**:
- **页面下拉**: 显示当前页面，可切换到其他页面
- **页面数量**: 显示总页数
- **添加页面**: "+"按钮，添加新页面

**视图控制**:
- **缩放**: 下拉选择器（25%/50%/100%/150%/200%）
- **适应画布**: 按钮，自动调整缩放比例
- **网格开关**: 切换网格显示
- **参考线开关**: 切换参考线显示

### 3.3 右侧区域

**预览按钮**:
- **图标**: 眼睛图标
- **文字**: "预览"
- **悬停效果**: 背景色 `rgba(212, 175, 55, 0.1)`

**分享按钮**:
- **图标**: 分享图标
- **文字**: "分享"
- **下拉菜单**: 直接分享、生成链接、导出PDF

**发布按钮**:
- **主要按钮**: 背景色 `#D4AF37`，文字"发布"
- **状态**: 草稿/已发布，不同颜色标识

## 4. 左侧工具面板

### 4.1 页面管理

**页面列表**:
- **页面卡片**: 显示所有页面的缩略图
- **页面信息**: 页码、页面标题、页面类型
- **操作**:
  - 添加页面：+按钮
  - 复制页面：复制图标
  - 删除页面：删除图标
  - 重新排序：拖拽调整顺序

**页面类型**:
- **封面**: 封面模板
- **目录**: 目录模板
- **项目概述**: 项目概述模板
- **设计方案**: 设计方案模板
- **预算明细**: 预算表格模板
- **时间计划**: 时间轴模板
- **空白页**: 空白模板

**批量操作**:
- **全选**: 选择所有页面
- **批量删除**: 删除选中页面
- **批量复制**: 复制选中页面

### 4.2 模块库

**模块分类**:
- **文本模块**: 标题、段落、引用、列表
- **媒体模块**: 图片、视频、3D模型、轮播图
- **布局模块**: 网格、分栏、卡片、选项卡
- **数据模块**: 表格、图表、统计卡片
- **交互模块**: 按钮、表单、评论、分享
- **装饰模块**: 分隔线、图标、形状、徽章

**模块展示**:
- **图标**: 每个模块的代表性图标
- **名称**: 模块名称
- **预览**: 悬停时显示模块预览
- **拖拽**: 支持直接拖拽到画布

**搜索功能**:
- **搜索框**: 搜索模块名称
- **标签筛选**: 按标签筛选模块
- **收藏模块**: 显示用户收藏的常用模块

### 4.3 素材库

**素材分类**:
- **图片素材**: 项目图片、示例图片、装饰图片
- **图标素材**: 系统图标、行业图标、自定义图标
- **字体素材**: 中文字体、英文字体
- **颜色素材**: 预设色板、品牌色板
- **模板素材**: 页面模板、组件模板

**素材展示**:
- **网格布局**: 缩略图展示
- **预览**: 悬停时显示大图预览
- **拖拽**: 支持直接拖拽到画布
- **收藏**: 心形图标，收藏素材

**上传功能**:
- **上传按钮**: 上传新素材
- **批量上传**: 支持多文件上传
- **文件夹**: 创建素材文件夹
- **标签管理**: 为素材添加标签

## 5. 中央画布区

### 5.1 画布交互

**选择元素**:
- **单击选择**: 单击选中元素
- **框选**: 拖拽框选多个元素
- **Shift多选**: 按住Shift多选
- **Ctrl/Cmd多选**: 按住Ctrl/Cmd多选

**移动元素**:
- **拖拽移动**: 拖拽元素到新位置
- **方向键移动**: 按方向键微调位置
- **自动吸附**: 自动吸附到网格线、参考线、其他元素

**缩放元素**:
- **拖拽角点**: 拖拽角点缩放
- **保持比例**: 按住Shift保持宽高比
- **数字输入**: 在属性面板输入精确尺寸

**旋转元素**:
- **旋转手柄**: 拖拽旋转手柄
- **角度输入**: 在属性面板输入精确角度
- **快捷角度**: 90°、180°、270°快捷旋转

**层级管理**:
- **前置**: 将元素移到最前
- **后置**: 将元素移到最后
- **上移一层**: 向上移动一层
- **下移一层**: 向下移动一层

### 5.2 元素类型

**文本元素**:
- **标题**: H1-H6，不同样式
- **段落**: 正文文本，支持富文本
- **引用**: 引用样式，支持作者
- **列表**: 有序/无序列表
- **代码**: 代码块，支持语法高亮

**媒体元素**:
- **图片**: 支持JPG、PNG、WebP、SVG
- **视频**: 支持MP4、MOV，嵌入YouTube、Bilibili
- **3D模型**: 支持GLTF、GLB格式，Three.js渲染
- **轮播图**: 多张图片轮播，支持自动播放
- **音频**: 音频播放器，支持MP3、WAV

**布局元素**:
- **网格**: 响应式网格布局
- **分栏**: 2-4栏分栏布局
- **卡片**: 卡片容器，支持阴影和圆角
- **选项卡**: 标签页切换内容
- **手风琴**: 折叠面板

**数据元素**:
- **表格**: 数据表格，支持排序和筛选
- **图表**: ECharts图表，支持多种图表类型
- **统计卡片**: 数字统计，支持趋势图
- **进度条**: 进度指示器
- **时间轴**: 时间线展示

**交互元素**:
- **按钮**: 可点击按钮，支持链接
- **表单**: 输入框、选择器、复选框等
- **评论**: 评论区域，支持回复
- **分享**: 社交分享按钮
- **弹窗**: 模态框触发器

**装饰元素**:
- **分隔线**: 水平/垂直分隔线
- **图标**: SVG图标，可调整大小和颜色
- **形状**: 矩形、圆形、三角形等基本形状
- **徽章**: 状态徽章，支持数字
- **装饰**: 花纹、边框、背景图案

### 5.3 画布辅助功能

**智能对齐**:
- **自动对齐**: 拖拽时自动对齐到其他元素
- **等距分布**: 多个元素自动等距分布
- **居中对齐**: 自动居中对齐到画布或容器

**参考线**:
- **自动参考线**: 拖拽时显示参考线
- **手动参考线**: 可从标尺拖拽添加
- **智能参考线**: 显示间距、对齐关系

**网格系统**:
- **基础网格**: 10px网格
- **列网格**: 12列响应式网格
- **自定义网格**: 可设置网格间距

**标尺**:
- **像素标尺**: 显示精确位置
- **百分比标尺**: 显示相对位置
- **拖拽参考线**: 从标尺拖拽创建参考线

## 6. 右侧属性面板

### 6.1 元素属性

**通用属性**:
- **ID**: 元素唯一标识
- **类名**: CSS类名
- **可见性**: 显示/隐藏
- **交互性**: 可交互/不可交互

**位置属性**:
- **X坐标**: 数字输入框
- **Y坐标**: 数字输入框
- **宽度**: 数字输入框 + 锁定比例
- **高度**: 数字输入框 + 锁定比例
- **旋转**: 角度输入框 + 滑块

**样式属性**:
- **背景色**: 颜色选择器
- **边框**: 边框宽度、样式、颜色
- **圆角**: 圆角半径输入框
- **阴影**: 阴影设置（X、Y、模糊、扩散、颜色）
- **透明度**: 透明度滑块

**动画属性**:
- **进入动画**: 动画类型选择器
- **动画延迟**: 数字输入框
- **动画时长**: 数字输入框
- **动画缓动**: 缓动函数选择器

### 6.2 文本属性

**字体设置**:
- **字体族**: 中文字体/英文字体选择器
- **字体大小**: 数字输入框 + 预设选项
- **字体粗细**: 字重选择器
- **字体样式**: 正常/斜体
- **文本装饰**: 无/下划线/删除线

**段落设置**:
- **行高**: 数字输入框
- **字间距**: 数字输入框
- **对齐方式**: 左/中/右/两端对齐
- **缩进**: 首行缩进、左缩进、右缩进
- **换行**: 自动换行/强制换行

**颜色设置**:
- **文字颜色**: 颜色选择器
- **背景色**: 颜色选择器
- **高亮色**: 颜色选择器

**链接设置**:
- **链接地址**: 文本输入框
- **链接目标**: 新窗口/当前窗口
- **链接样式**: 默认/自定义

### 6.3 媒体属性

**图片属性**:
- **图片源**: 图片选择器 + 上传按钮
- **替代文本**: alt文本输入框
- **图片尺寸**: 原始/自定义/响应式
- **裁剪**: 裁剪工具
- **滤镜**: 亮度、对比度、饱和度等

**视频属性**:
- **视频源**: 视频选择器 + URL输入
- **封面图**: 封面图片选择器
- **自动播放**: 开关
- **循环播放**: 开关
- **控件显示**: 开关

**3D模型属性**:
- **模型源**: 模型文件选择器
- **材质**: 材质选择器
- **光照**: 光照设置
- **相机**: 相机角度设置
- **交互**: 旋转/缩放/平移开关

### 6.4 布局属性

**容器属性**:
- **布局类型**: 流式/网格/弹性
- **对齐方式**: 主轴/交叉轴对齐
- **间距**: 元素间距设置
- **填充**: 内边距设置
- **边距**: 外边距设置

**响应式属性**:
- **断点设置**: 移动端/平板端/桌面端
- **隐藏设置**: 在指定设备上隐藏
- **尺寸设置**: 不同设备上的尺寸
- **布局设置**: 不同设备上的布局

### 6.5 数据属性

**表格属性**:
- **数据源**: 手动输入/CSV导入/API
- **列设置**: 列名、宽度、对齐
- **排序**: 排序设置
- **筛选**: 筛选设置
- **分页**: 分页设置

**图表属性**:
- **图表类型**: 折线图/柱状图/饼图等
- **数据源**: 手动输入/CSV导入/API
- **坐标轴**: X轴/Y轴设置
- **图例**: 图例设置
- **颜色**: 颜色设置

### 6.6 交互属性

**事件设置**:
- **点击事件**: 跳转链接/显示弹窗/执行动作
- **悬停事件**: 显示提示/改变样式
- **滚动事件**: 触发动画/加载内容

**表单属性**:
- **字段类型**: 文本/数字/日期/选择等
- **验证规则**: 必填/格式/范围
- **默认值**: 默认值设置
- **占位符**: 占位符文本

**评论属性**:
- **评论来源**: 手动/API
- **显示设置**: 显示数量/排序方式
- **权限设置**: 发表权限/查看权限

## 7. 图层管理

### 7.1 图层面板

**图层树**:
- **层级结构**: 显示元素的层级关系
- **折叠/展开**: 可折叠容器元素
- **可见性**: 眼睛图标控制可见性
- **锁定**: 锁定图标控制可编辑性

**图层操作**:
- **重命名**: 双击图层名称重命名
- **删除**: 删除图层
- **复制**: 复制图层
- **移动**: 拖拽调整图层顺序

**图层筛选**:
- **类型筛选**: 按元素类型筛选
- **名称搜索**: 搜索图层名称
- **可见性筛选**: 显示/隐藏图层

### 7.2 图层交互

**选择图层**:
- **单击选择**: 单击选中图层
- **多选**: Ctrl/Cmd + 单击多选
- **框选**: 拖拽框选多个图层

**图层操作**:
- **分组**: 将选中图层分组
- **取消分组**: 取消图层分组
- **合并**: 合并选中图层
- **提取**: 从组中提取图层

**图层属性**:
- **图层名称**: 显示在图层面板
- **图层类型**: 显示元素类型图标
- **图层状态**: 显示选中/锁定/隐藏状态

## 8. 资产库集成

### 8.1 企业资产库

**品牌资产**:
- **Logo**: 企业Logo库
- **配色**: 品牌色板
- **字体**: 品牌字体
- **模板**: 品牌模板

**产品库**:
- **产品图片**: 产品图片库
- **产品信息**: 产品规格、价格
- **3D模型**: 产品3D模型
- **技术参数**: 产品技术文档

**案例库**:
- **成功案例**: 过往项目案例
- **设计素材**: 设计元素、图案
- **文案模板**: 标准化文案

### 8.2 第三方资产库

**图片库**:
- **Unsplash**: 高质量免费图片
- **Pexels**: 免费图片库
- **Shutterstock**: 付费图片库

**图标库**:
- **Iconfont**: 阿里巴巴图标库
- **Font Awesome**: 经典图标库
- **Material Icons**: Google图标库

**字体库**:
- **Google Fonts**: Google字体库
- **Adobe Fonts**: Adobe字体库
- **本地字体**: 系统字体

### 8.3 资产管理

**资产上传**:
- **拖拽上传**: 支持拖拽上传
- **批量上传**: 支持多文件上传
- **文件夹**: 创建资产文件夹
- **标签**: 为资产添加标签

**资产组织**:
- **分类**: 按类型分类
- **收藏**: 收藏常用资产
- **搜索**: 全局搜索资产
- **版本**: 资产版本管理

**资产权限**:
- **团队共享**: 团队成员可访问
- **个人私有**: 仅自己可访问
- **客户可见**: 客户可查看
- **版权信息**: 资产版权管理

## 9. 产品定价模块集成

### 9.1 产品插入

**产品选择器**:
- **分类浏览**: 按产品分类浏览
- **搜索功能**: 搜索产品名称、型号
- **筛选功能**: 按价格、品牌、规格筛选
- **快速选择**: 常用产品快捷选择

**产品卡片**:
- **产品图片**: 主图展示
- **产品名称**: 产品名称
- **产品价格**: 显示价格
- **库存状态**: 库存充足/紧张/缺货
- **添加按钮**: 添加到提案

### 9.2 产品展示

**展示模式**:
- **简单模式**: 仅显示产品图片和价格
- **详细模式**: 显示完整产品信息
- **3D模式**: 3D模型展示
- **VR模式**: VR沉浸式展示

**产品信息**:
- **基本信息**: 名称、型号、品牌
- **技术参数**: 规格、尺寸、材质
- **价格信息**: 单价、折扣、总价
- **库存信息**: 库存数量、预计到货时间

**交互功能**:
- **查看详情**: 点击查看完整产品详情
- **更换产品**: 快速更换同类产品
- **配置选项**: 选择产品配置（颜色、尺寸等）
- **添加备注**: 为客户添加产品备注

### 9.3 报价计算

**自动计算**:
- **单价×数量**: 自动计算小计
- **税费计算**: 自动计算税费
- **折扣计算**: 自动应用折扣
- **总计计算**: 自动计算最终总价

**报价表**:
- **表格展示**: 产品清单表格
- **分类汇总**: 按类别汇总价格
- **成本分析**: 显示成本和利润
- **导出功能**: 导出报价表为Excel

**版本管理**:
- **报价版本**: 保存不同版本的报价
- **版本对比**: 对比不同版本的差异
- **客户反馈**: 记录客户对报价的反馈
- **最终确认**: 客户确认最终报价

### 9.4 ERP集成

**实时同步**:
- **库存同步**: 实时同步库存状态
- **价格同步**: 实时同步最新价格
- **订单同步**: 提案转订单自动同步
- **状态同步**: 订单状态实时更新

**业务流程**:
- **提案转订单**: 一键转换为正式订单
- **审批流程**: 订单审批流程
- **生产安排**: 同步到生产系统
- **物流跟踪**: 订单物流状态跟踪

## 10. 响应式设计

### 10.1 桌面端 (>1024px)
- 完整四面板布局
- 画布显示完整尺寸
- 所有功能可用

### 10.2 平板端 (768px-1024px)
- 左侧和右侧面板可折叠
- 画布自适应显示
- 核心功能保留

### 10.3 移动端 (<768px)
- 顶部工具栏简化
- 左侧和右侧面板改为底部抽屉
- 画布显示移动端预览
- 基础编辑功能可用

## 11. 交互细节

### 11.1 微交互
- **元素选择**: 选中元素显示蓝色边框
- **拖拽反馈**: 拖拽时显示半透明预览
- **自动保存**: 实时保存，显示保存状态

### 11.2 动画效果
- **页面切换**: 淡入淡出
- **面板展开**: 平滑展开动画
- **元素出现**: 从中心放大出现

### 11.3 快捷键
- `Ctrl/Cmd + Z`: 撤销
- `Ctrl/Cmd + Y`: 重做
- `Ctrl/Cmd + C/V`: 复制/粘贴
- `Delete`: 删除选中元素
- `Ctrl/Cmd + D`: 复制元素
- `Ctrl/Cmd + G`: 分组/取消分组
- `Ctrl/Cmd + A`: 全选
- `Ctrl/Cmd + S`: 保存

## 12. 可访问性

### 12.1 键盘导航
- 所有面板支持Tab键导航
- 方向键支持元素微调
- 快捷键支持常用操作

### 12.2 屏幕阅读器
- 元素提供完整描述
- 操作提供语音提示
- 状态变更语音通知

### 12.3 色彩对比
- 文本与背景对比度≥4.5:1
- 选中状态使用多重标识
- 支持高对比度模式

---
*本文档版本：1.0*
*最后更新：2026年2月4日*