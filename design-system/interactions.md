# 交互规范文档

## 1. 交互设计原则

### 1.1 核心原则

**一致性（Consistency）**:
- 相同功能在不同页面使用相同的交互模式
- 相同元素在不同状态下保持一致的视觉反馈
- 遵循平台和行业的交互惯例

**反馈性（Feedback）**:
- 每个用户操作都应有即时、清晰的反馈
- 使用视觉、听觉、触觉等多种反馈方式
- 反馈应与操作的重要性相匹配

**可预测性（Predictability）**:
- 用户应能预测操作的结果
- 使用熟悉的交互模式和隐喻
- 提供清晰的操作提示和引导

**容错性（Error Prevention & Recovery）**:
- 预防错误发生，而不是事后处理
- 提供撤销和重做功能
- 错误提示应清晰、友好，并提供解决方案

**效率性（Efficiency）**:
- 减少用户完成任务所需的步骤
- 提供快捷键和批量操作
- 记住用户的偏好和历史操作

## 2. 微交互设计

### 2.1 按钮交互

**默认状态**:
- 清晰的视觉层次，主要按钮突出显示
- 按钮文字简洁明了，使用动词
- 图标与文字结合，增强可识别性

**悬停状态（Hover）**:
- **主要按钮**: 背景色加深10%，添加阴影 `0 2px 8px rgba(212, 175, 55, 0.3)`
- **次要按钮**: 背景色变为 `#F8F5F0`，边框色变为 `#D4AF37`
- **文本按钮**: 背景色 `rgba(212, 175, 55, 0.08)`，文字色变为 `#D4AF37`
- **过渡时间**: 150ms，缓动函数 `ease-in-out`

**激活状态（Active）**:
- **主要按钮**: 背景色加深20%，阴影加深
- **次要按钮**: 背景色 `#E0E0E0`
- **涟漪效果**: 从点击位置扩散的圆形涟漪，持续时间 300ms

**禁用状态（Disabled）**:
- 背景色 `#E0E0E0`，文字色 `#9E9E9E`
- 光标变为 `not-allowed`
- 无悬停和点击效果

**加载状态（Loading）**:
- 显示旋转加载图标
- 文字变为"加载中..."或保持原文字
- 禁用点击，光标变为 `wait`

### 2.2 输入框交互

**默认状态**:
- 边框 `1px solid #E0E0E0`
- 占位符文字颜色 `#9E9E9E`
- 光标闪烁频率 1Hz

**聚焦状态（Focus）**:
- 边框色变为 `#D4AF37`，边框宽度变为 `2px`
- 添加外发光 `0 0 0 3px rgba(212, 175, 55, 0.1)`
- 占位符文字淡出
- 过渡时间 200ms

**填充状态（Filled）**:
- 显示输入内容
- 如有清除按钮，显示在右侧
- 如有验证，显示验证图标

**错误状态（Error）**:
- 边框色变为 `#F44336`
- 显示错误图标（红色感叹号）
- 下方显示错误提示文字
- 轻微抖动动画（3次，每次5px位移）

**成功状态（Success）**:
- 边框色变为 `#4CAF50`
- 显示成功图标（绿色勾选）
- 可选：显示成功提示文字

**禁用状态（Disabled）**:
- 背景色 `#F8F5F0`
- 文字色 `#9E9E9E`
- 光标变为 `not-allowed`

### 2.3 卡片交互

**默认状态**:
- 背景 `#FFFFFF`
- 边框 `1px solid #E0E0E0`
- 阴影 `0 2px 8px rgba(0, 0, 0, 0.08)`

**悬停状态（Hover）**:
- 阴影加深 `0 4px 16px rgba(0, 0, 0, 0.12)`
- 卡片轻微上移 `-2px`
- 图片轻微放大 `scale(1.05)`
- 过渡时间 250ms，缓动函数 `ease-out`

**点击状态（Active）**:
- 阴影减弱 `0 1px 4px rgba(0, 0, 0, 0.1)`
- 卡片轻微下移 `1px`
- 过渡时间 100ms

**选中状态（Selected）**:
- 边框色 `#D4AF37`，边框宽度 `2px`
- 左上角显示金色勾选图标
- 背景色轻微变化 `rgba(212, 175, 55, 0.05)`

### 2.4 开关交互

**关闭状态（Off）**:
- 背景色 `#E0E0E0`
- 滑块位于左侧
- 滑块颜色 `#FFFFFF`

**开启状态（On）**:
- 背景色 `#D4AF37`
- 滑块位于右侧
- 滑块颜色 `#FFFFFF`

**切换动画**:
- 滑块平滑滑动，持续时间 200ms
- 背景色渐变，持续时间 200ms
- 缓动函数 `ease-in-out`

**悬停状态**:
- 滑块轻微放大 `scale(1.1)`
- 添加阴影 `0 2px 4px rgba(0, 0, 0, 0.2)`

**禁用状态**:
- 背景色 `#F8F5F0`
- 滑块颜色 `#9E9E9E`
- 光标变为 `not-allowed`

### 2.5 下拉选择器交互

**默认状态**:
- 显示当前选中值或占位符
- 右侧显示下拉箭头图标
- 边框 `1px solid #E0E0E0`

**展开状态（Open）**:
- 边框色变为 `#D4AF37`
- 下拉箭头旋转180°
- 下拉面板从上到下展开，持续时间 200ms
- 下拉面板显示阴影 `0 4px 16px rgba(0, 0, 0, 0.12)`

**选项悬停**:
- 背景色 `#F8F5F0`
- 文字色保持不变
- 过渡时间 100ms

**选项选中**:
- 背景色 `rgba(212, 175, 55, 0.1)`
- 右侧显示金色勾选图标
- 文字色变为 `#D4AF37`

**搜索功能**:
- 输入时实时过滤选项
- 匹配文字高亮显示
- 无匹配时显示"无匹配结果"

## 3. 页面过渡动画

### 3.1 页面切换

**淡入淡出（Fade）**:
- 旧页面淡出，透明度从 1 到 0
- 新页面淡入，透明度从 0 到 1
- 持续时间 300ms
- 缓动函数 `ease-in-out`
- 适用场景：同级页面切换

**滑动切换（Slide）**:
- 新页面从右侧滑入，旧页面向左滑出
- 返回时方向相反
- 持续时间 300ms
- 缓动函数 `cubic-bezier(0.4, 0, 0.2, 1)`
- 适用场景：层级页面切换

**缩放切换（Scale）**:
- 旧页面缩小并淡出
- 新页面从中心放大并淡入
- 持续时间 250ms
- 缓动函数 `ease-out`
- 适用场景：详情页展开

### 3.2 模态框动画

**出现动画**:
- 遮罩层淡入，透明度从 0 到 0.45，持续时间 200ms
- 模态框从中心缩放出现，scale 从 0.9 到 1，持续时间 250ms
- 模态框同时淡入，透明度从 0 到 1
- 缓动函数 `ease-out`

**消失动画**:
- 模态框缩小并淡出，scale 从 1 到 0.9，持续时间 200ms
- 遮罩层淡出，透明度从 0.45 到 0，持续时间 200ms
- 缓动函数 `ease-in`

**移动端动画**:
- 从底部滑入，translateY 从 100% 到 0
- 持续时间 300ms
- 缓动函数 `cubic-bezier(0.4, 0, 0.2, 1)`

### 3.3 抽屉动画

**侧边抽屉**:
- 从侧边滑入，translateX 从 100% 到 0（右侧）或从 -100% 到 0（左侧）
- 遮罩层同时淡入
- 持续时间 300ms
- 缓动函数 `cubic-bezier(0.4, 0, 0.2, 1)`

**底部抽屉**:
- 从底部滑入，translateY 从 100% 到 0
- 遮罩层同时淡入
- 持续时间 300ms
- 缓动函数 `cubic-bezier(0.4, 0, 0.2, 1)`

### 3.4 通知动画

**Toast通知**:
- 从顶部滑入，translateY 从 -100% 到 0
- 同时淡入，透明度从 0 到 1
- 持续时间 250ms
- 停留3秒后自动消失
- 消失时淡出并向上滑出

**Notification通知**:
- 从右侧滑入，translateX 从 100% 到 0
- 同时淡入，透明度从 0 到 1
- 持续时间 300ms
- 停留5秒后自动消失
- 消失时淡出并向右滑出

## 4. 加载状态

### 4.1 旋转加载器

**样式**:
- 圆形边框，部分显示颜色
- 颜色 `#D4AF37`
- 线宽 `2px`
- 尺寸：小 `16px`，中 `24px`，大 `32px`

**动画**:
- 顺时针旋转360°
- 持续时间 1s
- 线性动画，无限循环
- 使用 CSS animation 或 SVG animation

### 4.2 骨架屏

**样式**:
- 背景色 `#F0F0F0`
- 圆角与实际内容一致
- 高度与实际内容一致

**动画**:
- 从左到右的光泽扫过效果
- 渐变色从 `#F0F0F0` 到 `#F8F8F8` 再到 `#F0F0F0`
- 持续时间 1.5s
- 缓动函数 `ease-in-out`
- 无限循环

**使用场景**:
- 列表加载
- 卡片加载
- 表格加载
- 详情页加载

### 4.3 进度条

**线性进度条**:
- 高度 `4px` 或 `8px`
- 背景色 `#E0E0E0`
- 进度色 `#D4AF37`
- 圆角 `4px`

**动画**:
- 进度条从左到右填充
- 过渡时间 300ms
- 缓动函数 `ease-out`

**不确定进度**:
- 进度条来回滑动
- 持续时间 2s
- 缓动函数 `ease-in-out`
- 无限循环

**圆形进度条**:
- 圆形边框，部分填充颜色
- 显示百分比文字
- 动画：圆形填充从0%到目标百分比

### 4.4 加载文字

**加载提示**:
- "加载中..."
- "正在处理..."
- "请稍候..."

**动画效果**:
- 文字后的省略号动画
- 1个点 → 2个点 → 3个点 → 1个点
- 每个状态持续 500ms

## 5. 手势控制（触摸设备）

### 5.1 基础手势

**点击（Tap）**:
- 单指快速点击
- 触发元素的主要操作
- 显示涟漪效果

**长按（Long Press）**:
- 单指按住超过500ms
- 触发上下文菜单或详情
- 显示放大镜效果或震动反馈

**双击（Double Tap）**:
- 单指快速点击两次
- 触发缩放或特殊操作
- 间隔时间小于300ms

### 5.2 滑动手势

**水平滑动（Swipe）**:
- 单指水平快速滑动
- 触发页面切换或删除操作
- 滑动距离超过50px且速度超过0.5px/ms

**垂直滑动（Scroll）**:
- 单指垂直滑动
- 触发页面滚动
- 支持惯性滚动

**下拉刷新（Pull to Refresh）**:
- 在页面顶部下拉
- 显示刷新图标和提示文字
- 释放后触发刷新
- 刷新完成后自动收起

### 5.3 缩放手势

**双指缩放（Pinch）**:
- 双指捏合或张开
- 触发内容缩放
- 支持图片、地图、画布等

**双击缩放**:
- 双击放大到200%
- 再次双击恢复100%
- 动画持续时间 300ms

### 5.4 拖拽手势

**拖拽移动（Drag）**:
- 单指按住并移动
- 触发元素位置移动
- 显示拖拽预览

**拖拽排序**:
- 长按后拖拽
- 触发列表项排序
- 显示占位符和拖拽预览

## 6. 拖放行为

### 6.1 拖拽开始

**拖拽触发**:
- 鼠标按下并移动超过5px
- 或长按500ms后移动

**视觉反馈**:
- 原元素变为半透明（透明度 0.5）
- 显示拖拽预览（跟随鼠标）
- 光标变为 `grabbing`

### 6.2 拖拽过程

**拖拽预览**:
- 半透明的元素副本
- 跟随鼠标移动
- 显示阴影 `0 4px 16px rgba(0, 0, 0, 0.2)`

**放置目标高亮**:
- 可放置区域显示虚线边框
- 背景色变为 `rgba(212, 175, 55, 0.1)`
- 显示"放置到此处"提示

**不可放置提示**:
- 光标变为 `no-drop`
- 放置区域无高亮
- 可选：显示禁止图标

### 6.3 拖拽结束

**成功放置**:
- 元素平滑移动到目标位置
- 过渡时间 300ms
- 缓动函数 `ease-out`
- 显示成功提示

**取消拖拽**:
- 元素平滑返回原位置
- 过渡时间 300ms
- 缓动函数 `ease-in-out`

**自动滚动**:
- 拖拽到边缘时自动滚动
- 滚动速度根据距离边缘的距离调整

## 7. 滚动行为

### 7.1 平滑滚动

**页面滚动**:
- 使用 `scroll-behavior: smooth`
- 或使用 JavaScript 实现平滑滚动
- 持续时间根据距离计算，最长1s

**锚点跳转**:
- 点击锚点链接平滑滚动到目标
- 滚动到目标后，目标元素高亮显示
- 高亮持续2s后淡出

### 7.2 无限滚动

**触发条件**:
- 滚动到距离底部200px时触发
- 或使用 Intersection Observer API

**加载提示**:
- 底部显示加载指示器
- 显示"加载更多..."文字

**加载完成**:
- 新内容从下方淡入
- 加载指示器消失
- 如无更多内容，显示"已加载全部"

### 7.3 虚拟滚动

**大列表优化**:
- 仅渲染可见区域的元素
- 滚动时动态加载和卸载元素
- 保持滚动条位置准确

**占位符**:
- 未加载区域显示占位符
- 占位符高度与实际内容一致

### 7.4 滚动吸附

**分页滚动**:
- 滚动结束后自动吸附到最近的页面
- 使用 `scroll-snap-type` 和 `scroll-snap-align`

**卡片滚动**:
- 横向滚动的卡片列表
- 滚动结束后自动吸附到卡片边缘

## 8. 表单交互

### 8.1 实时验证

**验证时机**:
- 失焦时验证（onBlur）
- 输入时验证（onChange），但有防抖延迟500ms
- 提交时验证（onSubmit）

**验证反馈**:
- 成功：绿色勾选图标 + 绿色边框
- 错误：红色感叹号图标 + 红色边框 + 错误提示
- 警告：黄色警告图标 + 黄色边框 + 警告提示

**错误提示**:
- 显示在输入框下方
- 字体 `12px`，颜色 `#F44336`
- 从上到下淡入，持续时间 200ms

### 8.2 自动完成

**触发条件**:
- 输入超过2个字符时触发
- 有防抖延迟300ms

**下拉建议**:
- 显示在输入框下方
- 最多显示10条建议
- 匹配文字高亮显示

**键盘导航**:
- 上下箭头选择建议
- Enter键确认选择
- Esc键关闭建议

### 8.3 多步骤表单

**步骤指示器**:
- 显示当前步骤和总步骤数
- 已完成步骤显示勾选图标
- 当前步骤高亮显示

**步骤切换**:
- 点击"下一步"验证当前步骤
- 验证通过后切换到下一步
- 支持点击步骤指示器跳转（已完成的步骤）

**进度保存**:
- 自动保存表单数据
- 刷新页面后恢复数据
- 显示"已自动保存"提示

## 9. 数据可视化交互

### 9.1 图表交互

**悬停提示（Tooltip）**:
- 鼠标悬停在数据点上显示详细信息
- 提示框跟随鼠标移动
- 提示框显示数值、标签、百分比等

**点击交互**:
- 点击数据点高亮显示
- 点击图例显示/隐藏对应数据系列
- 点击坐标轴标签筛选数据

**缩放和平移**:
- 鼠标滚轮缩放图表
- 拖拽平移图表
- 双击重置缩放

**动画**:
- 图表初始加载时的动画
- 数据更新时的过渡动画
- 持续时间 500ms-1s

### 9.2 表格交互

**排序**:
- 点击表头排序
- 显示排序图标（上箭头/下箭头）
- 支持多列排序

**筛选**:
- 表头显示筛选图标
- 点击显示筛选面板
- 支持多条件筛选

**分页**:
- 底部显示分页器
- 显示当前页/总页数
- 支持跳转到指定页

**行选择**:
- 点击行选中
- 复选框多选
- Shift+点击范围选择

## 10. 快捷键

### 10.1 全局快捷键

**导航**:
- `Ctrl/Cmd + K`: 打开全局搜索
- `Ctrl/Cmd + /`: 显示快捷键帮助
- `Esc`: 关闭模态框/抽屉/下拉菜单

**操作**:
- `Ctrl/Cmd + N`: 创建新项目
- `Ctrl/Cmd + S`: 保存
- `Ctrl/Cmd + P`: 打印/预览
- `Ctrl/Cmd + F`: 搜索

### 10.2 编辑快捷键

**文本编辑**:
- `Ctrl/Cmd + Z`: 撤销
- `Ctrl/Cmd + Y` 或 `Ctrl/Cmd + Shift + Z`: 重做
- `Ctrl/Cmd + C`: 复制
- `Ctrl/Cmd + V`: 粘贴
- `Ctrl/Cmd + X`: 剪切
- `Ctrl/Cmd + A`: 全选

**画布编辑**:
- `Ctrl/Cmd + D`: 复制元素
- `Ctrl/Cmd + G`: 分组/取消分组
- `Delete` 或 `Backspace`: 删除选中元素
- `方向键`: 移动元素（1px）
- `Shift + 方向键`: 移动元素（10px）

### 10.3 视图快捷键

**缩放**:
- `Ctrl/Cmd + +`: 放大
- `Ctrl/Cmd + -`: 缩小
- `Ctrl/Cmd + 0`: 重置缩放
- `Ctrl/Cmd + 1`: 100%缩放

**视图切换**:
- `D/W/M/Y`: 切换到日/周/月/年视图（日历）
- `T`: 跳转到今天（日历）

## 11. 可访问性交互

### 11.1 键盘导航

**Tab键导航**:
- Tab键按顺序聚焦可交互元素
- Shift + Tab键反向导航
- 焦点指示器清晰可见（金色边框 `2px`）

**方向键导航**:
- 上下箭头在列表中导航
- 左右箭头在标签页中导航
- Home/End键跳转到开始/结束

**Enter/Space键**:
- Enter键触发按钮、链接的主要操作
- Space键触发复选框、单选按钮的切换

### 11.2 屏幕阅读器

**ARIA标签**:
- 所有交互元素提供 `aria-label`
- 复杂组件提供 `aria-describedby`
- 动态内容使用 `aria-live` 通知变更

**语音提示**:
- 操作成功/失败的语音提示
- 页面加载完成的语音提示
- 表单验证错误的语音提示

### 11.3 焦点管理

**焦点陷阱**:
- 模态框打开时，焦点限制在模态框内
- Tab键在模态框内循环
- 关闭模态框后，焦点返回触发元素

**焦点顺序**:
- 逻辑的焦点顺序（从上到下，从左到右）
- 避免焦点跳跃
- 隐藏元素不可聚焦

## 12. 性能优化

### 12.1 防抖和节流

**防抖（Debounce）**:
- 搜索输入：300ms
- 窗口调整：200ms
- 表单验证：500ms

**节流（Throttle）**:
- 滚动事件：100ms
- 鼠标移动：50ms
- 窗口调整：100ms

### 12.2 懒加载

**图片懒加载**:
- 使用 Intersection Observer API
- 进入视口前200px开始加载
- 显示占位符或模糊预览

**组件懒加载**:
- 路由级别的代码分割
- 组件级别的动态导入
- 显示加载指示器

### 12.3 动画性能

**使用GPU加速**:
- 使用 `transform` 和 `opacity` 属性
- 避免使用 `left`、`top`、`width`、`height`
- 使用 `will-change` 提示浏览器

**减少重绘和回流**:
- 批量DOM操作
- 使用 `requestAnimationFrame`
- 避免强制同步布局

---
*本文档版本：1.0*
*最后更新：2026年2月4日*