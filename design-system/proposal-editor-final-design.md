# 提案编辑器最终设计方案
## 基于参考网站：Artisane Design Portfolio

---

## ⚠️ 重要说明

本方案基于您提供的参考网站进行设计，采用相同的设计美学和交互模式。

**参考网站**：https://artisane-design-portfolio-presentation-system-484528026544.us-west1.run.app

---

## 1. 整体设计风格 🎨

### 1.1 视觉风格
**完全采用参考网站的极简奢华风格**：

- **色彩方案**：
  - 主背景：米白色 `#faf9f6`
  - 文本：深灰/黑色 `#1a1a1a`
  - 分割线：浅灰 `#f1f1f1`
  - 强调：白色透明层和黑色遮罩

- **字体系统**：
  - 标题：Playfair Display（英文）/ Noto Serif SC（中文）
  - 正文：Inter（英文）/ Noto Sans SC（中文）
  - 装饰：Cormorant Garamond

- **设计原则**：
  - 大量留白营造高级感
  - 全屏沉浸式展示
  - 优雅的动画过渡
  - 图文混排的叙事性

---

## 2. 布局方案 📐

### 2.1 主界面布局

```
┌─────────────────────────────────────────────────────────────────┐
│ [← 返回]  春江花园别墅设计方案  ━━━━━●━━━━━ 60%  [🤖 AI] [👁 预览] [✓ 已保存] [📤 发布] │
└─────────────────────────────────────────────────────────────────┘
┌───┬─────────────────────────────────────────────────────────────┐
│ 📄│                                                             │
│   │                                                             │
│ 📄│                  全屏画布展示区                              │
│   │              (沉浸式提案内容展示)                            │
│ 📄│                                                             │
│   │                                                             │
│ 📄│                                                             │
│   │                                                             │
│ 📄│                                                             │
└───┴─────────────────────────────────────────────────────────────┘
     ↑
  左侧页面导航
  (可收起/展开)
```

**特点**：
- ✅ 顶部固定工具栏（显示项目名、进度条、操作按钮）
- ✅ 左侧可收起的页面导航（缩略图列表）
- ✅ 中央全屏画布区域（类似参考网站）
- ✅ 右侧滑出式编辑面板（点击元素时出现）

---

### 2.2 右侧编辑面板（滑出式）

```
                                        ┌─────────────────────────┐
                                        │ ✕ 关闭                  │
                                        ├─────────────────────────┤
                                        │ [内容] [样式] [报价]    │
                                        ├─────────────────────────┤
                                        │                         │
                                        │  标题：                 │
                                        │  [春江花园别墅设计]     │
                                        │                         │
                                        │  描述：                 │
                                        │  [现代简约风格...]      │
                                        │                         │
                                        │  背景图：               │
                                        │  [上传图片]             │
                                        │                         │
                                        │  [保存更改]             │
                                        │                         │
                                        └─────────────────────────┘
```

**触发方式**：
- 点击画布中的任何元素
- 点击顶部工具栏的"编辑"按钮
- 使用快捷键 `E`

---

## 3. 核心功能设计 🚀

### 3.1 画布编辑器

**交互模式**：
- **查看模式**（默认）：全屏展示，类似参考网站的浏览体验
- **编辑模式**：点击元素后，右侧滑出编辑面板
- **预览模式**：完全隐藏所有编辑工具，纯展示

**内容模块**（参考网站的章节结构）：
1. **Hero** - 开场页（全屏背景图+标题）
2. **Insight** - 设计理念（图文混排）
3. **Manifesto** - 设计宣言（深色背景）
4. **Floorplan** - 平面图对比
5. **Rendering** - 效果图展示（支持热点标注）
6. **Gallery** - 图片集
7. **Moodboard** - 材料板（色卡+材料信息）
8. **Quotation** - 产品报价（新增）
9. **Delivery** - 交付计划

**操作方式**：
- 点击任何文本直接编辑
- 点击图片打开上传/替换界面
- 拖拽调整模块顺序
- 右键菜单：复制、删除、移动

---

### 3.2 产品报价模块 💰

**位置**：作为独立章节嵌入提案（类似Rendering模块）

**界面设计**：
```
┌─────────────────────────────────────────────────────────────┐
│                        产品报价清单                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────┬──────────┬────────┬──────────┐           │
│  │ 产品名称      │ 规格     │ 数量   │ 单价     │           │
│  ├──────────────┼──────────┼────────┼──────────┤           │
│  │ 🛋️ 现代沙发   │ 3人位    │ 1      │ ¥5,999   │           │
│  │ 🪑 餐椅       │ 实木     │ 6      │ ¥899     │           │
│  │ 💡 吊灯       │ 北欧风   │ 3      │ ¥1,299   │           │
│  └──────────────┴──────────┴────────┴──────────┘           │
│                                                             │
│  小计：¥12,999                                              │
│  税费：¥780                                                 │
│  ─────────────────────────────────────────                 │
│  总计：¥13,779                                              │
│                                                             │
│  [+ 添加产品]                                               │
└─────────────────────────────────────────────────────────────┘
```

**编辑方式**：
1. 点击"添加产品"按钮
2. 右侧滑出产品选择面板
3. 搜索或浏览产品分类
4. 选择产品，设置数量
5. 自动计算总价
6. 支持ERP数据同步

**ERP集成**：
- 实时同步产品库存
- 自动更新价格
- 库存不足时警告提示

---

### 3.3 自动保存机制 💾

**采用智能自动保存（参考网站风格）**：

**状态显示**（顶部工具栏右侧）：
```
正常状态：  [✓ 所有更改已保存]
编辑中：    [● 未保存的更改]
保存中：    [⏳ 正在保存...]
失败：      [❌ 保存失败 - 点击重试]
```

**保存策略**：
- 检测到内容变化后 **3秒** 自动保存（防抖）
- 仅保存增量更改（减少网络传输）
- 支持 `Ctrl+S` 手动保存
- 离线时缓存到本地，联网后自动同步

**冲突解决**：
```
┌─────────────────────────────────────┐
│ ⚠️ 检测到冲突                        │
├─────────────────────────────────────┤
│ 其他用户（李四）也修改了此提案。     │
│                                     │
│ 您的版本：2026-02-04 15:30          │
│ 服务器版本：2026-02-04 15:32        │
│                                     │
│ [查看差异] [保留我的] [使用服务器版本]│
└─────────────────────────────────────┘
```

---

### 3.4 版本管理 📚

**入口**：顶部工具栏"版本历史"按钮

**界面**：右侧滑出版本面板

```
┌─────────────────────────────────────┐
│ 📜 版本历史                    [✕]  │
├─────────────────────────────────────┤
│                                     │
│ ●━━━ 版本 5 (当前版本)              │
│ │    2026-02-04 16:00              │
│ │    张三：添加了产品报价            │
│ │    [查看] [对比]                  │
│ │                                  │
│ ●━━━ 版本 4                         │
│ │    2026-02-04 15:30              │
│ │    李四：更新了效果图              │
│ │    [查看] [恢复]                  │
│ │                                  │
│ ●━━━ 版本 3                         │
│ │    2026-02-04 14:00              │
│ │    张三：修改了设计理念            │
│ │    [查看] [恢复]                  │
│ │                                  │
│ ●━━━ 版本 2                         │
│      2026-02-04 10:30              │
│      张三：添加了平面图              │
│      [查看] [恢复]                  │
│                                     │
│ [创建快照]                           │
└─────────────────────────────────────┘
```

**版本对比**：
- 点击"对比"按钮
- 画布分屏显示两个版本
- 高亮显示差异部分
- 支持滑动对比（拖动滑块查看）

**版本恢复**：
```
┌─────────────────────────────────────┐
│ ⚠️ 确认恢复版本 4                    │
├─────────────────────────────────────┤
│ 恢复后，版本 5 的以下更改将丢失：     │
│ • 新增的产品报价模块                 │
│ • 添加的3个产品                      │
│                                     │
│ 💡 提示：恢复会创建新版本 6，         │
│    您可以随时切换回版本 5            │
│                                     │
│ [确认恢复] [取消]                    │
└─────────────────────────────────────┘
```

---

### 3.5 AI集成 🤖

**入口**：顶部工具栏"AI"按钮

**功能面板**（右侧滑出）：

```
┌─────────────────────────────────────┐
│ 🤖 AI助手                      [✕]  │
├─────────────────────────────────────┤
│ [图像生成] [文案创作] [智能建议]    │
├─────────────────────────────────────┤
│                                     │
│ 🎨 AI图像生成                        │
│                                     │
│ 描述场景：                           │
│ ┌─────────────────────────────────┐ │
│ │现代简约客厅，大落地窗，米白色沙发 │ │
│ │木质茶几，绿植装饰...             │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 风格：[现代简约 ▼]                  │
│ 色调：[暖色调 ▼]                    │
│ 尺寸：[1920×1080 ▼]                │
│                                     │
│ [生成图像]                           │
│                                     │
│ ─────────────────────────────────   │
│                                     │
│ ✍️ AI文案生成                        │
│                                     │
│ 文案类型：[设计理念 ▼]              │
│ 关键词：[现代、简约、温馨]          │
│                                     │
│ [生成文案]                           │
│                                     │
└─────────────────────────────────────┘
```

**AI供应商选择**（设置页面）：
- OpenAI (GPT-4, DALL-E)
- Anthropic Claude
- Google Gemini

**使用流程**：
1. 点击顶部"AI"按钮
2. 选择功能（图像/文案/建议）
3. 输入描述或关键词
4. 点击生成
5. 查看结果，选择应用到画布

---

## 4. 动画效果 ✨

**完全采用参考网站的动画风格**：

### 4.1 页面加载动画
```css
/* fade-in-up 效果 */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.8s ease-out;
}
```

### 4.2 图片悬停效果
```css
.image-hover {
  transition: transform 0.3s ease;
}

.image-hover:hover {
  transform: scale(1.05);
}
```

### 4.3 面板滑出动画
```css
.slide-in-right {
  animation: slideInRight 0.3s ease-out;
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}
```

### 4.4 进度条动画
```css
.progress-bar {
  transition: width 0.3s ease;
}
```

---

## 5. 响应式设计 📱

### 5.1 断点设置
```
- Mobile:  < 768px
- Tablet:  768px - 1024px
- Desktop: > 1024px
```

### 5.2 适配策略

**桌面端（> 1024px）**：
- 完整功能展示
- 左侧导航始终可见
- 右侧编辑面板宽度 400px

**平板端（768px - 1024px）**：
- 左侧导航默认收起
- 右侧编辑面板宽度 350px
- 工具栏图标+文字

**移动端（< 768px）**：
- 左侧导航完全隐藏
- 右侧编辑面板全屏显示
- 工具栏仅显示图标
- 底部固定操作栏

---

## 6. 技术实现 💻

### 6.1 技术栈

**前端**：
- React 18+ (组件化)
- Next.js 14+ (SSR + App Router)
- TypeScript (类型安全)
- Tailwind CSS (原子化样式)
- Framer Motion (动画)
- Zustand (状态管理)

**后端**：
- Node.js + Nest.js
- PostgreSQL (数据库)
- Redis (缓存)
- AWS S3 / 阿里云OSS (文件存储)

**AI集成**：
- OpenAI API
- Anthropic Claude API
- Google Gemini API

### 6.2 核心组件结构

```
src/
├── components/
│   ├── Editor/
│   │   ├── Canvas.tsx           # 画布组件
│   │   ├── Toolbar.tsx          # 顶部工具栏
│   │   ├── PageNav.tsx          # 左侧页面导航
│   │   ├── EditPanel.tsx        # 右侧编辑面板
│   │   └── ProgressBar.tsx      # 进度条
│   ├── Modules/
│   │   ├── HeroModule.tsx       # Hero模块
│   │   ├── InsightModule.tsx    # Insight模块
│   │   ├── QuotationModule.tsx  # 报价模块
│   │   └── ...
│   ├── AI/
│   │   ├── AIPanel.tsx          # AI工具面板
│   │   ├── ImageGenerator.tsx   # 图像生成
│   │   └── TextGenerator.tsx    # 文案生成
│   └── Version/
│       ├── VersionPanel.tsx     # 版本历史面板
│       └── VersionCompare.tsx   # 版本对比
├── hooks/
│   ├── useAutoSave.ts           # 自动保存Hook
│   ├── useVersionControl.ts     # 版本控制Hook
│   └── useAI.ts                 # AI集成Hook
└── stores/
    ├── editorStore.ts           # 编辑器状态
    ├── versionStore.ts          # 版本状态
    └── aiStore.ts               # AI状态
```

---

## 7. 用户确认清单 ✅

请确认以下设计方案：

### 7.1 设计风格
- [x] 采用参考网站的极简奢华风格
- [x] 米白色背景 + 深灰文本
- [x] Playfair Display + Inter 字体组合
- [x] 大量留白和优雅动画

### 7.2 布局方案
- [x] 全屏沉浸式画布
- [x] 左侧可收起页面导航
- [x] 右侧滑出式编辑面板
- [x] 顶部固定工具栏 + 进度条

### 7.3 核心功能
- [x] 产品报价模块（独立章节 + 右侧编辑）
- [x] 智能自动保存（3秒防抖）
- [x] 版本管理（时间轴 + 滑动对比）
- [x] AI集成（图像生成 + 文案创作）

### 7.4 交互方式
- [x] 点击元素触发右侧编辑面板
- [x] 拖拽调整模块顺序
- [x] 快捷键支持（Ctrl+S, E等）
- [x] 实时预览

---

## 8. 下一步行动 🚀

### 8.1 立即开始实施

如果您确认以上方案，我将立即开始：

1. **阶段 4：前端实现**（4-6周）
   - 搭建 Next.js + React 项目
   - 实现画布编辑器
   - 实现所有模块组件
   - 集成自动保存和版本管理
   - 实现产品报价模块
   - 集成AI功能

2. **阶段 5：后端实现**（4-6周）
   - 搭建 Nest.js API
   - 实现数据库和缓存
   - 实现自动保存API
   - 实现版本控制系统
   - 实现产品报价API
   - 集成ERP接口
   - 集成AI服务

3. **阶段 6：AI功能实现**（2-3周）
4. **阶段 7：集成测试**（2周）
5. **阶段 8：部署上线**（1周）

---

## 9. 确认方式 📝

**请回复以下任一选项**：

1. **"确认，开始实施"** - 我将立即开始阶段4（前端开发）
2. **"需要修改XXX"** - 告诉我需要调整的部分
3. **"有疑问"** - 我会详细解答

---

**文档版本**: 2.0（基于参考网站）
**创建日期**: 2026年2月4日
**参考网站**: Artisane Design Portfolio
**状态**: 待用户最终确认
