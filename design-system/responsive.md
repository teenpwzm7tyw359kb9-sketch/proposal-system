# 响应式设计指南

## 1. 响应式设计原则

### 1.1 核心理念

**移动优先（Mobile First）**:
- 从最小屏幕开始设计，逐步增强到大屏幕
- 确保核心功能在所有设备上可用
- 优先考虑触摸交互和小屏幕体验

**内容优先（Content First）**:
- 根据内容重要性调整布局
- 在小屏幕上隐藏次要内容或折叠显示
- 保持内容的可读性和可访问性

**渐进增强（Progressive Enhancement）**:
- 基础功能在所有设备上可用
- 在支持的设备上提供增强功能
- 优雅降级，不影响基本使用

**性能优先（Performance First）**:
- 移动端优化图片和资源加载
- 减少HTTP请求和资源大小
- 使用懒加载和代码分割

## 2. 断点系统

### 2.1 标准断点

**移动端（Mobile）**:
- **超小屏**: < 375px（iPhone SE）
- **小屏**: 375px - 414px（iPhone 12/13/14）
- **中屏**: 414px - 768px（大屏手机）

**平板端（Tablet）**:
- **小平板**: 768px - 834px（iPad Mini）
- **标准平板**: 834px - 1024px（iPad）
- **大平板**: 1024px - 1280px（iPad Pro）

**桌面端（Desktop）**:
- **小桌面**: 1280px - 1440px（笔记本）
- **标准桌面**: 1440px - 1920px（台式机）
- **大桌面**: > 1920px（4K显示器）

### 2.2 断点使用

**CSS媒体查询**:
```css
/* 移动端 */
@media (max-width: 767px) {
  /* 移动端样式 */
}

/* 平板端 */
@media (min-width: 768px) and (max-width: 1023px) {
  /* 平板端样式 */
}

/* 桌面端 */
@media (min-width: 1024px) {
  /* 桌面端样式 */
}

/* 大桌面 */
@media (min-width: 1920px) {
  /* 大桌面样式 */
}
```

**JavaScript断点检测**:
```javascript
const breakpoints = {
  mobile: window.matchMedia('(max-width: 767px)'),
  tablet: window.matchMedia('(min-width: 768px) and (max-width: 1023px)'),
  desktop: window.matchMedia('(min-width: 1024px)')
};
```

## 3. 布局适配

### 3.1 网格系统

**桌面端（12列）**:
- **容器最大宽度**: 1440px
- **列宽**: 80px
- **列间距**: 24px
- **外边距**: 48px

**平板端（8列）**:
- **容器最大宽度**: 768px
- **列宽**: 60px
- **列间距**: 16px
- **外边距**: 32px

**移动端（4列）**:
- **容器最大宽度**: 100%
- **列宽**: 自适应
- **列间距**: 12px
- **外边距**: 16px

### 3.2 布局模式

**流式布局（Fluid Layout）**:
- 使用百分比宽度
- 容器宽度自适应屏幕
- 最大宽度限制防止过宽

**弹性布局（Flexbox）**:
- 使用 `display: flex`
- 自动调整子元素大小和位置
- 适合一维布局（行或列）

**网格布局（Grid）**:
- 使用 `display: grid`
- 定义行和列的结构
- 适合二维布局

**混合布局**:
- 结合流式、弹性和网格布局
- 根据内容特点选择合适的布局方式

### 3.3 布局转换

**桌面端 → 平板端**:
- 3列网格 → 2列网格
- 侧边栏宽度减小或折叠
- 字体大小适当减小
- 间距适当减小

**平板端 → 移动端**:
- 2列网格 → 1列网格
- 侧边栏改为抽屉或底部导航
- 表格改为卡片或列表
- 多列表单改为单列

## 4. 组件适配

### 4.1 导航组件

**桌面端**:
- **顶部导航**: 水平排列，显示所有菜单项
- **侧边导航**: 固定在左侧，宽度 240px
- **面包屑**: 完整显示路径

**平板端**:
- **顶部导航**: 水平排列，次要菜单折叠到"更多"
- **侧边导航**: 可折叠，宽度 200px
- **面包屑**: 显示最后2-3级

**移动端**:
- **顶部导航**: 汉堡菜单，点击展开抽屉
- **底部导航**: Tab栏，显示4-5个主要功能
- **面包屑**: 仅显示当前页和返回按钮

### 4.2 表格组件

**桌面端**:
- 完整表格，显示所有列
- 固定表头，支持横向滚动
- 每行高度 56px-64px

**平板端**:
- 隐藏次要列，保留核心列
- 固定表头，支持横向滚动
- 每行高度 48px-56px

**移动端**:
- 改为卡片布局，垂直堆叠
- 每个卡片显示关键信息
- 点击卡片查看完整信息

### 4.3 表单组件

**桌面端**:
- 双列或多列布局
- 标签在输入框左侧或上方
- 输入框宽度固定或最大宽度限制

**平板端**:
- 单列或双列布局
- 标签在输入框上方
- 输入框宽度自适应

**移动端**:
- 单列布局
- 标签在输入框上方
- 输入框全宽
- 大触摸目标（最小 44px × 44px）

### 4.4 卡片组件

**桌面端**:
- 3-4列网格布局
- 卡片宽度固定或自适应
- 悬停效果明显

**平板端**:
- 2-3列网格布局
- 卡片宽度自适应
- 悬停效果保留

**移动端**:
- 1列布局，全宽显示
- 卡片高度自适应内容
- 无悬停效果，点击交互

### 4.5 模态框组件

**桌面端**:
- 居中显示，最大宽度 600px-800px
- 从中心缩放出现
- 点击遮罩层关闭

**平板端**:
- 居中显示，最大宽度 90%
- 从中心缩放出现
- 点击遮罩层关闭

**移动端**:
- 从底部滑入，全宽显示
- 高度最大 90vh
- 向下滑动关闭

### 4.6 图片组件

**桌面端**:
- 原始尺寸或固定尺寸
- 支持lightbox放大查看
- 懒加载

**平板端**:
- 自适应容器宽度
- 保持宽高比
- 懒加载

**移动端**:
- 全宽显示
- 保持宽高比
- 懒加载，优先加载小图

## 5. 字体适配

### 5.1 字体大小

**桌面端**:
- H1: 36px
- H2: 28px
- H3: 22px
- H4: 18px
- Body: 14px
- Caption: 12px

**平板端**:
- H1: 32px
- H2: 24px
- H3: 20px
- H4: 16px
- Body: 14px
- Caption: 12px

**移动端**:
- H1: 28px
- H2: 22px
- H3: 18px
- H4: 16px
- Body: 14px
- Caption: 12px

### 5.2 行高和间距

**桌面端**:
- 行高: 1.6
- 段落间距: 16px
- 标题间距: 24px

**平板端**:
- 行高: 1.6
- 段落间距: 14px
- 标题间距: 20px

**移动端**:
- 行高: 1.5
- 段落间距: 12px
- 标题间距: 16px

### 5.3 字体缩放

**使用相对单位**:
- 使用 `rem` 或 `em` 而不是 `px`
- 基础字号 `16px = 1rem`
- 支持用户字体缩放设置

**动态字体大小**:
```css
/* 使用 clamp() 实现流式字体 */
h1 {
  font-size: clamp(28px, 5vw, 36px);
}
```

## 6. 间距适配

### 6.1 间距系统

**桌面端**:
- XS: 4px
- S: 8px
- M: 16px
- L: 24px
- XL: 32px
- XXL: 48px

**平板端**:
- XS: 4px
- S: 8px
- M: 12px
- L: 20px
- XL: 28px
- XXL: 40px

**移动端**:
- XS: 4px
- S: 6px
- M: 12px
- L: 16px
- XL: 24px
- XXL: 32px

### 6.2 容器间距

**桌面端**:
- 页面外边距: 48px
- 模块间距: 32px
- 卡片内边距: 24px

**平板端**:
- 页面外边距: 32px
- 模块间距: 24px
- 卡片内边距: 20px

**移动端**:
- 页面外边距: 16px
- 模块间距: 16px
- 卡片内边距: 16px

## 7. 触摸优化

### 7.1 触摸目标

**最小尺寸**:
- iOS: 44px × 44px
- Android: 48dp × 48dp
- 推荐: 48px × 48px

**间距**:
- 触摸目标之间至少 8px 间距
- 重要操作之间至少 16px 间距

**视觉尺寸 vs 触摸尺寸**:
- 视觉尺寸可以小于触摸尺寸
- 使用 padding 扩大触摸区域
- 使用伪元素扩大点击区域

### 7.2 手势支持

**基础手势**:
- 点击（Tap）
- 长按（Long Press）
- 滑动（Swipe）
- 双击（Double Tap）

**高级手势**:
- 捏合缩放（Pinch）
- 旋转（Rotate）
- 拖拽（Drag）

**手势冲突**:
- 避免手势冲突
- 提供手势提示
- 支持手势禁用

### 7.3 滚动优化

**惯性滚动**:
```css
-webkit-overflow-scrolling: touch;
```

**滚动性能**:
- 使用 `transform` 而不是 `position`
- 避免在滚动时执行复杂计算
- 使用 `will-change` 提示浏览器

**下拉刷新**:
- 在页面顶部下拉触发
- 显示刷新图标和提示
- 刷新完成后自动收起

## 8. 图片和媒体

### 8.1 响应式图片

**使用 srcset**:
```html
<img
  src="image-800.jpg"
  srcset="image-400.jpg 400w,
          image-800.jpg 800w,
          image-1200.jpg 1200w"
  sizes="(max-width: 767px) 100vw,
         (max-width: 1023px) 50vw,
         33vw"
  alt="描述"
/>
```

**使用 picture**:
```html
<picture>
  <source media="(max-width: 767px)" srcset="mobile.jpg">
  <source media="(max-width: 1023px)" srcset="tablet.jpg">
  <img src="desktop.jpg" alt="描述">
</picture>
```

### 8.2 图片优化

**格式选择**:
- WebP: 现代浏览器，体积小
- JPEG: 照片，有损压缩
- PNG: 透明图片，无损压缩
- SVG: 图标和矢量图

**尺寸优化**:
- 桌面端: 1920px 宽
- 平板端: 1024px 宽
- 移动端: 750px 宽
- 缩略图: 400px 宽

**懒加载**:
```html
<img src="placeholder.jpg" data-src="actual.jpg" loading="lazy" alt="描述">
```

### 8.3 视频适配

**响应式视频**:
```css
.video-container {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 */
  height: 0;
  overflow: hidden;
}

.video-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
```

**移动端优化**:
- 提供视频封面图
- 默认不自动播放
- 提供播放控件
- 支持全屏播放

## 9. 性能优化

### 9.1 资源加载

**关键资源优先**:
- 首屏内容优先加载
- 非关键资源延迟加载
- 使用 `preload` 和 `prefetch`

**代码分割**:
- 路由级别的代码分割
- 组件级别的动态导入
- 按需加载第三方库

**资源压缩**:
- 压缩CSS和JavaScript
- 压缩图片
- 启用Gzip或Brotli压缩

### 9.2 渲染优化

**减少重绘和回流**:
- 批量DOM操作
- 使用 `transform` 和 `opacity`
- 避免强制同步布局

**使用虚拟滚动**:
- 大列表使用虚拟滚动
- 仅渲染可见区域
- 动态加载和卸载元素

**骨架屏**:
- 首屏显示骨架屏
- 提升感知性能
- 减少白屏时间

### 9.3 网络优化

**减少HTTP请求**:
- 合并CSS和JavaScript文件
- 使用CSS Sprites或SVG Sprites
- 使用字体图标

**使用CDN**:
- 静态资源使用CDN
- 就近访问，减少延迟
- 提高加载速度

**缓存策略**:
- 设置合理的缓存时间
- 使用Service Worker缓存
- 离线可用

## 10. 测试和调试

### 10.1 设备测试

**真机测试**:
- iPhone（iOS）
- Android手机（多品牌）
- iPad（iOS）
- Android平板

**浏览器测试**:
- Chrome（桌面和移动）
- Safari（桌面和移动）
- Firefox（桌面和移动）
- Edge（桌面）

**模拟器测试**:
- Chrome DevTools设备模拟
- Xcode iOS模拟器
- Android Studio模拟器

### 10.2 响应式测试工具

**浏览器工具**:
- Chrome DevTools
- Firefox响应式设计模式
- Safari响应式设计模式

**在线工具**:
- BrowserStack
- Responsinator
- Am I Responsive

**自动化测试**:
- Puppeteer
- Playwright
- Cypress

### 10.3 性能测试

**性能指标**:
- FCP（First Contentful Paint）< 1.8s
- LCP（Largest Contentful Paint）< 2.5s
- FID（First Input Delay）< 100ms
- CLS（Cumulative Layout Shift）< 0.1

**测试工具**:
- Lighthouse
- WebPageTest
- Chrome DevTools Performance

## 11. 横竖屏适配

### 11.1 横屏布局

**移动端横屏**:
- 导航改为侧边栏或顶部栏
- 内容区域充分利用宽度
- 适当调整字体大小和间距

**平板横屏**:
- 类似桌面端布局
- 多列布局
- 侧边栏常驻

### 11.2 竖屏布局

**移动端竖屏**:
- 单列布局
- 底部导航
- 内容垂直滚动

**平板竖屏**:
- 单列或双列布局
- 侧边栏可折叠
- 适当调整间距

### 11.3 方向检测

**CSS媒体查询**:
```css
/* 横屏 */
@media (orientation: landscape) {
  /* 横屏样式 */
}

/* 竖屏 */
@media (orientation: portrait) {
  /* 竖屏样式 */
}
```

**JavaScript检测**:
```javascript
window.addEventListener('orientationchange', function() {
  if (window.orientation === 90 || window.orientation === -90) {
    // 横屏
  } else {
    // 竖屏
  }
});
```

## 12. 可访问性

### 12.1 响应式可访问性

**触摸目标**:
- 最小 44px × 44px（iOS）
- 最小 48dp × 48dp（Android）
- 足够的间距

**文字可读性**:
- 最小字号 14px（移动端）
- 足够的行高和字间距
- 高对比度

**键盘导航**:
- 所有功能支持键盘操作
- 清晰的焦点指示器
- 逻辑的Tab顺序

### 12.2 屏幕阅读器

**语义化HTML**:
- 使用正确的HTML标签
- 提供ARIA标签
- 描述性的链接文字

**动态内容**:
- 使用 `aria-live` 通知变更
- 提供加载状态提示
- 错误提示清晰明确

## 13. 最佳实践

### 13.1 设计原则

**内容优先**:
- 核心内容在所有设备上可访问
- 次要内容可折叠或隐藏
- 保持内容的可读性

**渐进增强**:
- 基础功能在所有设备上可用
- 高级功能在支持的设备上提供
- 优雅降级

**性能优先**:
- 移动端优化资源加载
- 减少HTTP请求
- 使用懒加载

### 13.2 开发原则

**移动优先**:
- 从移动端开始开发
- 逐步增强到桌面端
- 使用 `min-width` 媒体查询

**组件化**:
- 组件独立响应式
- 可复用的响应式组件
- 清晰的组件API

**测试驱动**:
- 在多设备上测试
- 自动化测试
- 性能测试

### 13.3 维护原则

**文档化**:
- 记录响应式设计决策
- 提供设计规范
- 更新设计系统

**持续优化**:
- 监控性能指标
- 收集用户反馈
- 持续改进

---
*本文档版本：1.0*
*最后更新：2026年2月4日*